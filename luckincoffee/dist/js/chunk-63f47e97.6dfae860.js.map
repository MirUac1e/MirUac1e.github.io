{"version":3,"sources":["webpack:///./src/assets/js/utils.js","webpack:///./src/views/Detail.vue?a739","webpack:///./src/views/Detail.vue?7931","webpack:///src/views/Detail.vue","webpack:///./src/views/Detail.vue?73e2","webpack:///./src/views/Detail.vue"],"names":["Utils","queryString","o","params","key","slice","utils","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","back","product","large_img","_v","_s","name","enname","_l","item","index","title","v","i","class","active","isActive","$event","toggleRule","price","count","model","value","callback","$$v","expression","badgeCount","toShopBag","isLike","like","addShopBag","buyNow","staticRenderFns","pid","$route","query","getProductByPid","findIsLike","findShopBagData","methods","$router","go","isBuying","push","$toast","message","forbidClick","duration","loadingType","axios","appkey","url","x","rules","length","tokenString","localStorage","getItem","data","method","rulesData","rule","map","component"],"mappings":"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","file":"js/chunk-63f47e97.6dfae860.js","sourcesContent":["class Utils {\r\n\r\n    //序列化参数\r\n    queryString(o) {\r\n      let params = '';\r\n      for (let key in o) {\r\n        params += `${key}=${o[key]}&`;\r\n      }\r\n  \r\n      return params.slice(0, -1);\r\n    }\r\n  \r\n  }\r\n  \r\n  export const utils = new Utils();","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=303f2c3a&lang=less&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=303f2c3a&lang=less&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('van-nav-bar',{attrs:{\"title\":\"商品详情\",\"left-text\":\"返回\",\"left-arrow\":\"\",\"fixed\":true},on:{\"click-left\":_vm.back}}),_c('div',{staticClass:\"detail-img\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":_vm.product.large_img}}),_c('div',{staticClass:\"detail-img-text\"},[_c('div',{staticClass:\"detail-img-cntext\"},[_vm._v(_vm._s(_vm.product.name))]),_c('div',{staticClass:\"detail-img-ustext\"},[_vm._v(_vm._s(_vm.product.enname))])])]),_c('div',{staticClass:\"detail-info\"},[_c('div',{staticClass:\"rule-box\"},_vm._l((_vm.product.rules),function(item,index){return _c('div',{key:index,staticClass:\"rule-item clearfix\"},[_c('div',{staticClass:\"rule-item-title \"},[_vm._v(_vm._s(item.title))]),_c('div',{staticClass:\"fl clearfix\"},_vm._l((item.rules),function(v,i){return _c('div',{key:i,staticClass:\"rule-item-tag fl\",class:{ active: v.isActive },on:{\"click\":function($event){return _vm.toggleRule(v, index)}}},[_vm._v(\" \"+_vm._s(v.title)+\" \")])}),0)])}),0),_c('div',{staticClass:\"desc-box\"},[_c('div',{staticClass:\"desc-title\"},[_vm._v(\"商品描述\")]),_c('div',{staticClass:\"desc-content\"},_vm._l((_vm.product.desc),function(item,index){return _c('div',{key:index,staticClass:\"desc-text\"},[_vm._v(\" \"+_vm._s(index + 1)+\"、\"+_vm._s(item)+\" \")])}),0)]),_c('div',{staticClass:\"clearfix desc-price-count\"},[_c('div',{staticClass:\"fl price\"},[_vm._v(\"￥\"+_vm._s(_vm.product.price * _vm.count))]),_c('div',{staticClass:\"fr\"},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"22\",\"disable-input\":\"\"},model:{value:(_vm.count),callback:function ($$v) {_vm.count=$$v},expression:\"count\"}})],1)])]),_c('van-goods-action',[_c('van-goods-action-icon',{attrs:{\"icon\":\"cart\",\"text\":\"购物车\",\"badge\":_vm.badgeCount == 0 ? '' : _vm.badgeCount,\"color\":\"#999\"},on:{\"click\":_vm.toShopBag}}),_c('van-goods-action-icon',{class:{ active: _vm.isLike },attrs:{\"icon\":\"like\",\"text\":\"收藏\",\"color\":\"#999\"},on:{\"click\":_vm.like}}),_c('van-goods-action-button',{attrs:{\"type\":\"danger\",\"color\":\"#6a91ec\",\"text\":\"加入购物车\"},on:{\"click\":_vm.addShopBag}}),_c('van-goods-action-button',{attrs:{\"type\":\"danger\",\"color\":\"#0c34ba\",\"text\":\"立即购买\"},on:{\"click\":_vm.buyNow}})],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <!-- 商品详情页面 -->\r\n  <div class=\"detail\">\r\n    <!-- 导航 -->\r\n    <van-nav-bar\r\n      title=\"商品详情\"\r\n      left-text=\"返回\"\r\n      left-arrow\r\n      :fixed=\"true\"\r\n      @click-left=\"back\"\r\n    />\r\n    <!-- 上面的图片 -->\r\n    <div class=\"detail-img\">\r\n      <img :src=\"product.large_img\" class=\"auto-img\" />\r\n      <div class=\"detail-img-text\">\r\n        <div class=\"detail-img-cntext\">{{ product.name }}</div>\r\n        <div class=\"detail-img-ustext\">{{ product.enname }}</div>\r\n      </div>\r\n    </div>\r\n    <!-- 中间的详细信息 -->\r\n    <div class=\"detail-info\">\r\n      <div class=\"rule-box\">\r\n        <div\r\n          class=\"rule-item clearfix\"\r\n          v-for=\"(item, index) in product.rules\"\r\n          :key=\"index\"\r\n        >\r\n          <!-- 规格标题 -->\r\n          <div class=\"rule-item-title \">{{ item.title }}</div>\r\n          <div class=\"fl clearfix\">\r\n            <!-- 规格内容 -->\r\n            <div\r\n              class=\"rule-item-tag fl\"\r\n              v-for=\"(v, i) in item.rules\"\r\n              :key=\"i\"\r\n              :class=\"{ active: v.isActive }\"\r\n              @click=\"toggleRule(v, index)\"\r\n            >\r\n              {{ v.title }}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 描述信息 -->\r\n      <div class=\"desc-box\">\r\n        <div class=\"desc-title\">商品描述</div>\r\n        <div class=\"desc-content\">\r\n          <div\r\n            class=\"desc-text\"\r\n            v-for=\"(item, index) in product.desc\"\r\n            :key=\"index\"\r\n          >\r\n            {{ index + 1 }}、{{ item }}\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <!-- 价格信息 -->\r\n      <div class=\"clearfix desc-price-count\">\r\n        <div class=\"fl price\">￥{{ product.price * count }}</div>\r\n        <div class=\"fr\">\r\n          <van-stepper\r\n            v-model=\"count\"\r\n            theme=\"round\"\r\n            button-size=\"22\"\r\n            disable-input\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <!-- 底部菜单 -->\r\n    <van-goods-action>\r\n      <van-goods-action-icon\r\n        icon=\"cart\"\r\n        text=\"购物车\"\r\n        :badge=\"badgeCount == 0 ? '' : badgeCount\"\r\n        color=\"#999\"\r\n        @click=\"toShopBag\"\r\n      />\r\n      <van-goods-action-icon\r\n        icon=\"like\"\r\n        text=\"收藏\"\r\n        @click=\"like\"\r\n        :class=\"{ active: isLike }\"\r\n        color=\"#999\"\r\n      />\r\n      <van-goods-action-button\r\n        type=\"danger\"\r\n        color=\"#6a91ec\"\r\n        text=\"加入购物车\"\r\n        @click=\"addShopBag\"\r\n      />\r\n      <van-goods-action-button\r\n        type=\"danger\"\r\n        color=\"#0c34ba\"\r\n        text=\"立即购买\"\r\n        @click=\"buyNow\"\r\n      />\r\n    </van-goods-action>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { utils } from \"../assets/js/utils\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      count: 1,\r\n      pid: \"\",\r\n      product: [],\r\n      isLike: false,\r\n      badgeCount: 0,\r\n    };\r\n  },\r\n  created() {\r\n    // 保存商品pid\r\n    this.pid = this.$route.query.pid;\r\n    // 根据pid获取商品数据和规格\r\n    this.getProductByPid();\r\n    // 根据用户 查看是否收藏了该商品\r\n    this.findIsLike();\r\n    // 查询购物车商品数量;\r\n    this.findShopBagData();\r\n  },\r\n  methods: {\r\n    // 返回\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 立即购买\r\n    buyNow(isBuying) {\r\n      this.addShopBag(true);\r\n    },\r\n    // 去到购物车\r\n    toShopBag() {\r\n      this.$router.push({ name: \"Shopbag\" });\r\n    },\r\n    // 根据商品的pid选择规格、详情等信息\r\n    getProductByPid() {\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        methods: \"GET\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          pid: this.pid,\r\n        },\r\n        url: \"/productDetail\",\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 600) {\r\n            // 把描述信息 按回车 分解成一段段\r\n            result.data.result[0].desc = result.data.result[0].desc.split(/\\n/);\r\n            // 处理商品规格信息\r\n            // [{\r\n            //     title : '温度'\r\n            //     rules : [{\r\n            //         title : \"热\",\r\n            //         isActive : true\r\n            //     }]\r\n            // }]\r\n            let rulesItems = [\"tem\", \"sugar\", \"cream\", \"milk\"];\r\n            let ruleData = [];\r\n            rulesItems.map((v) => {\r\n              // 判断饮品是否有上面需求的属性 没有就返回\r\n              if (result.data.result[0][v] == \"\") {\r\n                // console.log(`v的${v}是空的`)\r\n                return;\r\n              }\r\n              // 查找属性的名称\r\n              let rule = {\r\n                title: result.data.result[0][`${v}_desc`],\r\n                rules: [],\r\n              };\r\n              // 根据名称 查找名称里面有的选择\r\n              let r = result.data.result[0][v].split(\"/\");\r\n              // r = [热，冷]\r\n              r.map((value, index) => {\r\n                let o = {\r\n                  title: value,\r\n                  isActive: index == 0 ? true : false,\r\n                };\r\n                rule.rules.push(o);\r\n              });\r\n\r\n              ruleData.push(rule);\r\n              // console.log(ruleData)\r\n            });\r\n\r\n            result.data.result[0].rules = ruleData;\r\n\r\n            this.product = result.data.result[0];\r\n          }\r\n          // console.log(\"ppp=>\", this.product);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 切换规格\r\n    toggleRule(item, index) {\r\n      if (item.isActive) {\r\n        return;\r\n      }\r\n      // 上面v-for有两层\r\n      // 在上面的数据中 index是第一层大的 第二层的数字是i\r\n      // console.log(\"aaa => \", this.product.rules[index].rules);\r\n      let x = this.product.rules[index].rules;\r\n      for (let i = 0; i < x.length; i++) {\r\n        if (x[i].isActive) {\r\n          x[i].isActive = false;\r\n          break;\r\n        }\r\n      }\r\n      item.isActive = true;\r\n    },\r\n    // 收藏商品\r\n    like() {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        this.$toast('请先登录')\r\n        return\r\n        // return this.$router.push({ name: \"Login\" });\r\n      }\r\n\r\n      let data = utils.queryString({\r\n        appkey: this.appkey,\r\n        tokenString,\r\n        pid: this.pid,\r\n      });\r\n\r\n      let url = this.isLike ? \"notlike\" : \"like\";\r\n\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url,\r\n        data,\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 700) {\r\n            return this.$router.push({ name: \"Login\" });\r\n          } else if (result.data.code == 800) {\r\n            // 收藏成功\r\n            this.$toast(result.data.msg);\r\n            this.isLike = true;\r\n          } else if (result.data.code == 900) {\r\n            // 取消收藏成功\r\n            this.$toast(result.data.msg);\r\n            this.isLike = false;\r\n          } else {\r\n            console.log(result.data.msg);\r\n          }\r\n          console.log(result);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 查询是否被收藏\r\n    findIsLike() {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        \r\n        return\r\n        // return this.$router.push({ name: \"Login\" });\r\n      }\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findAllLike\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 2000) {\r\n            for (let i = 0; i < result.data.result.length; i++) {\r\n              if (result.data.result[i].pid == this.pid) {\r\n                this.isLike = true;\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"查询所有收藏结果不成功，=> \", result);\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 添加购物车商品\r\n    addShopBag(isBuying) {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        return this.$router.push({ name: \"Login\" });\r\n      }\r\n      // 获取商品规格数据\r\n      let rulesData = this.product.rules;\r\n      // 保存商品激活了的数据\r\n      let rule = \"\";\r\n      // 整理数据\r\n      rulesData.map((v) => {\r\n        for (let i = 0; i < v.rules.length; i++) {\r\n          if (v.rules[i].isActive) {\r\n            rule += v.rules[i].title + \"/\";\r\n          }\r\n        }\r\n      });\r\n      rule = rule.slice(0, -1);\r\n\r\n      let data = utils.queryString({\r\n        tokenString,\r\n        appkey: this.appkey,\r\n        pid: this.pid,\r\n        rule,\r\n        count: this.count,\r\n      });\r\n\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/addShopcart\",\r\n        data,\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 3000) {\r\n            // 成功加入\r\n            // 更改购物车内容数量数据(有多少条购物车数据，不是购物车商品总数量)\r\n            if (result.data.status == 1) {\r\n              this.badgeCount++;\r\n            }\r\n            if (isBuying === true) {\r\n              setTimeout(() => {\r\n                // 事件前半部分加入购物车返回sid\r\n                // 把sid传到pay页面就是立即购买\r\n                this.$router.push({\r\n                  name: \"Pay\",\r\n                  query: { sids: result.data.sid },\r\n                });\r\n              }, 600);\r\n            } else {\r\n              this.$toast(result.data.msg);\r\n            }\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 查询购物车商品数量\r\n    findShopBagData() {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        return\r\n        // return this.$router.push({ name: \"Login\" });\r\n      }\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findAllShopcart\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          console.log(result);\r\n          if (result.data.code == 5000) {\r\n            this.badgeCount = result.data.result.length;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.detail {\r\n  padding-bottom: 20px;\r\n  .detail-img {\r\n    margin-top: 46px;\r\n    position: relative;\r\n    .detail-img-text {\r\n      position: absolute;\r\n      bottom: 85px;\r\n      left: 30px;\r\n      //   border: 1px solid aqua;\r\n      font-size: 18px;\r\n      color: white;\r\n      .detail-img-cntext {\r\n        padding: 5px;\r\n      }\r\n      .detail-img-ustext {\r\n        padding: 0 5px;\r\n      }\r\n    }\r\n  }\r\n  .detail-info {\r\n    background-color: #fff;\r\n    // height: 300px;\r\n    position: relative;\r\n    top: -30px;\r\n    border-top-left-radius: 20px;\r\n    border-top-right-radius: 20px;\r\n    padding: 20px;\r\n    .rule-box {\r\n      border-bottom: 1px solid #e8e8e8;\r\n      padding: 10px 0 20px 0;\r\n      .rule-item {\r\n        margin-bottom: 10px;\r\n        &:last-child {\r\n          margin: 0;\r\n        }\r\n        .rule-item-title,\r\n        .rule-item-tag {\r\n          height: 30px;\r\n          width: 80px;\r\n          font-size: 14px;\r\n          line-height: 30px;\r\n          color: #444;\r\n        }\r\n        .rule-item-tag {\r\n          color: black;\r\n          background-color: #ebebeb;\r\n          margin-right: 20px;\r\n          border-radius: 15px;\r\n          text-align: center;\r\n          color: #6a6a6a;\r\n          &:last-child {\r\n            margin: 0;\r\n          }\r\n          &.active {\r\n            background-color: #0c34ba;\r\n            color: white;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    .desc-box {\r\n      border-bottom: 1px solid #e8e8e8;\r\n      .desc-title {\r\n        font-size: 14px;\r\n        color: #444;\r\n        padding: 10px 0;\r\n      }\r\n      .desc-content {\r\n        margin-bottom: 20px;\r\n        .desc-text {\r\n          font-size: 12px;\r\n          color: #999;\r\n        }\r\n      }\r\n    }\r\n\r\n    .desc-price-count {\r\n      margin-top: 20px;\r\n      .price {\r\n        color: #0c34ba;\r\n        font-size: 14px;\r\n        font-weight: bold;\r\n        height: 24px;\r\n        line-height: 24px;\r\n      }\r\n      // 按钮颜色\r\n      /deep/ .van-stepper__minus {\r\n        border: 1px solid #0c24ba;\r\n        color: #0c24ba;\r\n      }\r\n      /deep/ .van-stepper__plus {\r\n        background-color: #0c24ba;\r\n      }\r\n    }\r\n  }\r\n  // icon颜色\r\n  /deep/ .van-goods-action-icon.active {\r\n    .van-icon-like::before {\r\n      color: #0c34ba;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=303f2c3a&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=303f2c3a&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"303f2c3a\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}