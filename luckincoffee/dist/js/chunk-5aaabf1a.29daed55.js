(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5aaabf1a"],{"253d":function(s,o,t){"use strict";var e=t("aab8"),a=t.n(e);a.a},"2f14":function(s,o,t){"use strict";t.d(o,"a",(function(){return a}));class e{queryString(s){let o="";for(let t in s)o+=`${t}=${s[t]}&`;return o.slice(0,-1)}}const a=new e},"305b":function(s,o,t){"use strict";t.r(o);var e=function(){var s=this,o=s.$createElement,t=s._self._c||o;return t("div",{staticClass:"secure"},[t("van-nav-bar",{style:{"z-index":2},attrs:{title:"安全中心","left-text":"返回","left-arrow":"",fixed:!0},on:{"click-left":s.back}}),t("div",{staticClass:"secure-bg"}),t("div",{staticClass:"secure-box"},[t("div",[t("van-cell",{attrs:{title:"修改密码",size:"large","is-link":""},on:{click:s.popup}}),t("van-cell",{attrs:{title:"注销帐号",size:"large","is-link":""},on:{click:s.destroyedAccount}})],1),t("div",{staticClass:"btn-logout"},[t("van-button",{attrs:{round:"",color:"#0c34ba",block:""},on:{click:s.logOut}},[s._v("退出登录")])],1),t("van-popup",{style:{width:"100%",height:"50%"},attrs:{position:"bottom",closeable:"","close-icon":"close",round:"",overlay:"","overlay-class":"overlayClass"},model:{value:s.isOpen,callback:function(o){s.isOpen=o},expression:"isOpen"}},[t("div",{staticClass:"pop-content"},[t("div",{staticClass:"pop-title"},[s._v("修改密码")]),t("van-form",[t("van-field",{attrs:{"right-icon":s.password.old.isPassword?"closed-eye":"eye-o",type:s.password.old.isPassword?"password":"text",placeholder:"请输入旧的密码",autocomplete:"off"},on:{"click-right-icon":function(o){return s.passwordClick(s.password.old)}},model:{value:s.password.old.password,callback:function(o){s.$set(s.password.old,"password",o)},expression:"password.old.password"}}),t("van-field",{attrs:{"right-icon":s.password.new.isPassword?"closed-eye":"eye-o",type:s.password.new.isPassword?"password":"text",placeholder:"请输入新的密码",autocomplete:"off"},on:{"click-right-icon":function(o){return s.passwordClick(s.password.new)}},model:{value:s.password.new.password,callback:function(o){s.$set(s.password.new,"password",o)},expression:"password.new.password"}}),t("div",{staticClass:"register-btn"},[t("van-button",{attrs:{block:"",type:"info","native-type":"submit",round:""},on:{click:s.changePassword}},[s._v(" 确定修改 ")])],1)],1)],1)])],1)],1)},a=[],r=t("e3a8"),i=t("2f14"),n={data(){return{isOpen:!1,isPassword:!0,password:{old:{password:"",isPassword:!0},new:{password:"",isPassword:!0}}}},created(){},methods:{back(){this.$router.go(-1)},popup(){this.isOpen=!0},changePassword(){let s={oldPassword:{value:this.password.old.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码格式不正确"},newPassword:{value:this.password.new.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码格式不正确"}};if(r["a"].valid(s),!r["a"].valid(s))return;if(this.password.old.password==this.password.new.password)return void this.$toast("新密码不能和旧密码相同");let o=localStorage.getItem("CSTK");if(!o)return this.$router.push({name:"Login"});let t=i["a"].queryString({appkey:this.appkey,tokenString:o,password:this.password.new.password,oldPassword:this.password.old.password});this.$toast({message:"加载中",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/updatePassword",data:t}).then(s=>{this.$toast.clear(),this.$toast(s.data.msg),"E001"==s.data.code&&(localStorage.removeItem("CSTK"),this.$router.push({name:"Login"})),console.log(s)}).catch(s=>{console.log("error => ",s)})},passwordClick(s){s.isPassword=!s.isPassword},logOut(){this.$dialog.confirm({title:"退出登录",message:"是否确定退出登录？",confirmButtonColor:"#0c34ba"}).then(()=>{console.log("退出登录确定");let s=localStorage.getItem("CSTK");if(!s)return this.$router.push({name:"Login"});let o=i["a"].queryString({appkey:this.appkey,tokenString:s});this.$toast({message:"加载中",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/logout",data:o}).then(s=>{this.$toast.clear(),this.$toast(s.data.msg),"F001"==s.data.code&&setTimeout(()=>{localStorage.removeItem("CSTK"),this.$router.push({name:"Login"})},1e3)}).catch(s=>{console.log("error => ",s)})}).catch(()=>{console.log("退出登录取消")})},destroyedAccount(){this.$dialog.confirm({title:"注销帐号",message:"是否确定？一旦确定，将无法恢复！",confirmButtonColor:"#0c34ba"}).then(()=>{console.log("confirm");let s=localStorage.getItem("CSTK");if(!s)return this.$router.push({name:"Login"});let o=i["a"].queryString({appkey:this.appkey,tokenString:s});this.$toast({message:"加载中",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/destroyAccount",data:o}).then(s=>{this.$toast.clear(),console.log(s)}).catch(s=>{console.log("error => ",s)})}).catch(()=>{console.log("cancel")})}}},l=n,c=(t("253d"),t("2877")),d=Object(c["a"])(l,e,a,!1,null,"3adcd452",null);o["default"]=d.exports},aab8:function(s,o,t){},e3a8:function(s,o,t){"use strict";t.d(o,"a",(function(){return i}));t("9a83");var e=t("f564"),a=t("2b0e");a["a"].use(e["a"]);class r{valid(s){for(let o in s)if(!s[o].reg.test(s[o].value))return Object(e["a"])({type:"warning",message:s[o].errorMsg}),!1;return!0}}const i=new r}}]);
//# sourceMappingURL=chunk-5aaabf1a.29daed55.js.map