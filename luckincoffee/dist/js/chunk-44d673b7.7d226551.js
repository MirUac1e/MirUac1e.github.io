(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-44d673b7"],{"2f14":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));class i{queryString(t){let e="";for(let s in t)e+=`${s}=${t[s]}&`;return e.slice(0,-1)}}const a=new i},3837:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"my"},[s("div",{staticClass:"my-bg",style:{backgroundImage:"url("+t.userInfo.userBg+")"}},[t.isLogin?s("van-uploader",{staticClass:"uploader-box",attrs:{"after-read":t.upload}}):t._e()],1),s("div",{staticClass:"my-content"},[s("div",{staticClass:"my-box"},[t.isLogin?s("div",[s("div",{staticClass:"my-img clearfix"},[s("div",{staticClass:"fl img-box"},[s("img",{staticClass:"auto-img",attrs:{src:t.userInfo.userImg,alt:""}})]),s("div",{staticClass:"fl img-text"},[s("div",{staticClass:"nickname"},[t._v(t._s(t.userInfo.nickName))]),s("div",{staticClass:"desc"},[t._v(" "+t._s(""==t.userInfo.desc?"这家伙很懒，什么都没留下":t.userInfo.desc)+" ")])])])]):s("div",[s("van-button",{attrs:{type:"default",round:"",block:"",color:"#0c34ba",to:"Login"}},[t._v("请 先 登 录")])],1),t._l(t.lists,(function(t,e){return s("div",{key:e,staticClass:"lists"},[s("van-cell",{attrs:{title:t.title,to:t.to,"is-link":"",size:"large"}})],1)}))],2)])])},a=[],o=s("2f14"),n={data(){return{lists:[{title:"个人资料",to:{name:"Account"}},{title:"我的订单",to:{name:"Order"}},{title:"我的收藏",to:{name:"Like"}},{title:"收货地址",to:{name:"Address"}},{title:"安全中心",to:{name:"Secure"}}],isLogin:!1,userInfo:{},maxSize:1048576}},created(){this.getUserInfo()},methods:{getUserInfo(){let t=localStorage.getItem("CSTK");if(!t)return this.isLogin=!1,this.$router.push({name:"Login"});this.$toast({message:"加载中",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"get",url:"/findMy",params:{appkey:this.appkey,tokenString:t}}).then(t=>{this.$toast.clear(),(t.data.code="A001")&&(1==t.data.result.length?(this.userInfo=t.data.result[0],this.isLogin=!0):this.isLogin=!1)}).catch(t=>{console.log("error => ",t)})},upload(t){let e=localStorage.getItem("CSTK");if(!e)return;let s=t.file.type.split("/")[1],i=["png","gif","jpg","jpeg"];if(-1===i.indexOf(s))return void this.$notify({message:"图片类型只支持"+i.join(","),color:"#fff",background:"#0C34BA"});if(this.maxSize<t.file.size)return void this.$notify({message:"上传文件大小不能超过"+this.maxSize/1024+"KB",color:"#fff",background:"#0C34BA"});let a=t.content.replace(/data:image\/[A-Za-z]+;base64,/,""),n=o["a"].queryString({appkey:this.appkey,tokenString:e,imgType:s,serverBase64Img:a});this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"POST",url:"/updateUserBg",data:n}).then(t=>{this.$toast.clear(),console.log("result ==> ",t),"I001"==t.data.code&&(this.userInfo.userBg=t.data.userBg)}).catch(t=>{this.$toast.clear(),console.log("err ==> ",t)})}}},r=n,l=(s("d495"),s("2877")),c=Object(l["a"])(r,i,a,!1,null,"8f93bf42",null);e["default"]=c.exports},d495:function(t,e,s){"use strict";var i=s("f27f"),a=s.n(i);a.a},f27f:function(t,e,s){}}]);
//# sourceMappingURL=chunk-44d673b7.7d226551.js.map