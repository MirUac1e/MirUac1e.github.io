{"version":3,"sources":["webpack:///./src/assets/js/utils.js","webpack:///./src/views/mainViews/Shopbag.vue?382a","webpack:///src/views/mainViews/Shopbag.vue","webpack:///./src/views/mainViews/Shopbag.vue?b61b","webpack:///./src/views/mainViews/Shopbag.vue","webpack:///./src/views/mainViews/Shopbag.vue?821b"],"names":["Utils","queryString","o","params","key","slice","utils","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","on","toggleEdit","back","scopedSlots","_u","shopBagData","length","fn","_v","_s","isEdit","proxy","_l","item","index","$event","removeOneShopBag","sid","toggleCheck","model","value","callback","$$v","$set","expression","small_img","name","rule","enname","price","count","modifyCount","directives","rawName","total","commit","isAllCheck","allChecked","removeSelectShopBag","_e","staticRenderFns","pids","findShopBagData","methods","$router","go","sids","map","v","isCheck","push","join","$toast","sum","i","tokenString","localStorage","getItem","message","forbidClick","duration","loadingType","axios","method","url","appkey","data","JSON","stringify","removeShopBagData","splice","Number","component"],"mappings":"kHAAA,wCAAMA,EAGFC,YAAYC,GACV,IAAIC,EAAS,GACb,IAAK,IAAIC,KAAOF,EACdC,GAAW,GAAEC,KAAOF,EAAEE,MAGxB,OAAOD,EAAOE,MAAM,GAAI,IAKrB,MAAMC,EAAQ,IAAIN,G,yCCd3B,IAAIO,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,WAAW,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,MAAM,YAAY,KAAK,mBAAmB,QAAQC,GAAG,CAAC,cAAcR,EAAIS,WAAW,aAAaT,EAAIU,MAAMC,YAAYX,EAAIY,GAAG,CAAEZ,EAAIa,YAAYC,OAAS,EAAG,CAAClB,IAAI,QAAQmB,GAAG,WAAW,MAAO,CAACX,EAAG,MAAM,CAACJ,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGjB,EAAIkB,OAAS,KAAO,MAAM,SAASC,OAAM,GAAM,MAAM,MAAK,KAAQf,EAAG,MAAMJ,EAAIoB,GAAIpB,EAAe,aAAE,SAASqB,EAAKC,GAAO,OAAOlB,EAAG,iBAAiB,CAACR,IAAI0B,EAAMf,MAAM,CAAC,UAAYP,EAAIkB,QAAQP,YAAYX,EAAIY,GAAG,CAAC,CAAChB,IAAI,QAAQmB,GAAG,WAAW,MAAO,CAACX,EAAG,aAAa,CAACG,MAAM,CAAC,OAAS,GAAG,KAAO,SAAS,KAAO,KAAK,MAAQ,WAAWC,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOvB,EAAIwB,iBAAiBH,EAAKI,WAAWN,OAAM,IAAO,MAAK,IAAO,CAACf,EAAG,WAAW,CAACG,MAAM,CAAC,QAAS,IAAQ,CAACH,EAAG,MAAM,CAACE,YAAY,oBAAoB,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,eAAe,CAACG,MAAM,CAAC,YAAY,OAAO,gBAAgB,WAAWC,GAAG,CAAC,MAAQ,SAASe,GAAQ,OAAOvB,EAAI0B,YAAYL,KAAQM,MAAM,CAACC,MAAOP,EAAY,QAAEQ,SAAS,SAAUC,GAAM9B,EAAI+B,KAAKV,EAAM,UAAWS,IAAME,WAAW,mBAAmB,GAAG5B,EAAG,MAAM,CAACE,YAAY,cAAc,CAACF,EAAG,MAAM,CAACE,YAAY,WAAWC,MAAM,CAAC,IAAMc,EAAKY,UAAU,IAAM,QAAQ7B,EAAG,MAAM,CAACE,YAAY,eAAe,CAACF,EAAG,MAAM,CAACE,YAAY,YAAY,CAACF,EAAG,MAAM,CAACE,YAAY,cAAc,CAACN,EAAIgB,GAAGhB,EAAIiB,GAAGI,EAAKa,SAAS9B,EAAG,MAAM,CAACE,YAAY,eAAe,CAACN,EAAIgB,GAAGhB,EAAIiB,GAAGI,EAAKc,WAAW/B,EAAG,MAAM,CAACE,YAAY,WAAW,CAACN,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGI,EAAKe,QAAQ,OAAOhC,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACF,EAAG,MAAM,CAACE,YAAY,gBAAgB,CAACN,EAAIgB,GAAG,IAAIhB,EAAIiB,GAAGI,EAAKgB,MAAQhB,EAAKiB,UAAUlC,EAAG,MAAM,CAACE,YAAY,OAAO,CAACF,EAAG,cAAc,CAACG,MAAM,CAAC,MAAQ,QAAQ,cAAc,KAAK,gBAAgB,IAAIC,GAAG,CAAC,OAAS,SAASe,GAAQ,OAAOvB,EAAIuC,YAAYlB,KAAQM,MAAM,CAACC,MAAOP,EAAU,MAAEQ,SAAS,SAAUC,GAAM9B,EAAI+B,KAAKV,EAAM,QAASS,IAAME,WAAW,iBAAiB,YAAY,MAAK,GAAG5B,EAAG,YAAY,CAACoC,WAAW,CAAC,CAACN,KAAK,OAAOO,QAAQ,SAASb,MAAO5B,EAAIa,YAAYC,OAAS,EAAGkB,WAAW,2BAA2BzB,MAAM,CAAC,YAAc,eAAe,CAACH,EAAG,aAAa,CAACG,MAAM,CAAC,KAAO,UAAU,MAAQ,UAAU,GAAK,SAAS,CAACP,EAAIgB,GAAG,WAAW,GAAIhB,EAAIa,YAAYC,OAAS,EAAGV,EAAG,MAAM,CAACA,EAAG,iBAAiB,CAACoC,WAAW,CAAC,CAACN,KAAK,OAAOO,QAAQ,SAASb,OAAQ5B,EAAIkB,OAAQc,WAAW,YAAYzB,MAAM,CAAC,MAAQP,EAAI0C,MAAM,cAAc,OAAO,eAAe,WAAWlC,GAAG,CAAC,OAASR,EAAI2C,SAAS,CAACvC,EAAG,eAAe,CAACG,MAAM,CAAC,gBAAgB,UAAU,YAAY,QAAQC,GAAG,CAAC,MAAQR,EAAI4C,YAAYjB,MAAM,CAACC,MAAO5B,EAAc,WAAE6B,SAAS,SAAUC,GAAM9B,EAAI6C,WAAWf,GAAKE,WAAW,eAAe,CAAChC,EAAIgB,GAAG,UAAU,GAAGZ,EAAG,iBAAiB,CAACoC,WAAW,CAAC,CAACN,KAAK,OAAOO,QAAQ,SAASb,MAAO5B,EAAU,OAAEgC,WAAW,WAAWzB,MAAM,CAAC,cAAc,OAAO,eAAe,WAAWC,GAAG,CAAC,OAASR,EAAI8C,sBAAsB,CAAC1C,EAAG,eAAe,CAACG,MAAM,CAAC,gBAAgB,UAAU,YAAY,QAAQC,GAAG,CAAC,MAAQR,EAAI4C,YAAYjB,MAAM,CAACC,MAAO5B,EAAc,WAAE6B,SAAS,SAAUC,GAAM9B,EAAI6C,WAAWf,GAAKE,WAAW,eAAe,CAAChC,EAAIgB,GAAG,UAAU,IAAI,GAAGhB,EAAI+C,MAAM,IAC7kGC,EAAkB,G,YCqHtB,GACE,OACE,MAAO,CACLH,YAAY,EAEZ3B,QAAQ,EACR+B,KAAM,GACNpC,YAAa,GACb6B,MAAO,IAGX,UACEzC,KAAKiD,mBAEPC,QAAS,CAEP,OACElD,KAAKmD,QAAQC,IAAI,IAGnB,SACE,IAAIC,EAAO,GACXrD,KAAKY,YAAY0C,IAAI,IACfC,EAAEC,SACJH,EAAKI,KAAKF,EAAE/B,OAGtB,cAIM6B,EAAOA,EAAKK,KAAK,KAEjB1D,KAAKmD,QAAQM,KAAK,CAAxB,6BALQzD,KAAK2D,OAAO,cAQhB,aACE3D,KAAKiB,QAAUjB,KAAKiB,QAGtB,aACEjB,KAAKY,YAAY0C,IAAI,IACnBC,EAAEC,QAAUxD,KAAK4C,aAEnB5C,KAAK4D,OAIP,YAAYxC,GACVpB,KAAK4D,MACL,IAAK,IAAIC,EAAI,EAAGA,EAAI7D,KAAKY,YAAYC,OAAQgD,IAAK,CAChD,GAAmC,GAA/B7D,KAAKY,YAAYiD,GAAGL,QAEtB,YADAxD,KAAK4C,YAAa,GAGpB5C,KAAK4C,YAAa,IAItB,kBACE,IAAIkB,EAAcC,aAAaC,QAAQ,QACvC,IAAKF,EACH,OAAO9D,KAAKmD,QAAQM,KAAK,CACvBxB,KAAM,UAGVjC,KAAK2D,OAAO,CACVM,QAAS,MACTC,aAAa,EACbC,SAAU,EACVC,YAAa,YAEfpE,KAAKqE,MAAM,CACTC,OAAQ,MACRC,IAAK,mBACL7E,OAAQ,CACN8E,OAAQxE,KAAKwE,OACbV,iBAGV,SACQ,KAAR,eACA,mBACU,EAAV,oBACY,EAAZ,aAEU,KAAV,6BAGA,UACQ,QAAR,sBAII,YAAY1C,GACV,IAAI0C,EAAcC,aAAaC,QAAQ,QACvC,IAAKF,EACH,OAAO9D,KAAKmD,QAAQM,KAAK,CACvBxB,KAAM,UAIV,IAAIwC,EAAO5E,EAAjB,kBACQ2E,OAAQxE,KAAKwE,OACbV,cACAtC,IAAKJ,EAAKI,IACVa,MAAOjB,EAAKiB,QAGdrC,KAAK2D,OAAO,CACVM,QAAS,MACTC,aAAa,EACbC,SAAU,EACVC,YAAa,YAEfpE,KAAKqE,MAAM,CACTC,OAAQ,OACRC,IAAK,uBACLE,SAER,SACQ,KAAR,eACA,kBAEU,KAAV,MAGQ,QAAR,6BAEA,UACQ,QAAR,sBAII,kBAAkBpB,GAChB,IAAIS,EAAcC,aAAaC,QAAQ,QACvC,IAAKF,EACH,OAAO9D,KAAKmD,QAAQM,KAAK,CACvBxB,KAAM,UAIV,IAAIwC,EAAO5E,EAAjB,kBACQ2E,OAAQxE,KAAKwE,OACbV,cACAT,KAAMqB,KAAKC,UAAUtB,KAGvBrD,KAAK2D,OAAO,CACVM,QAAS,MACTC,aAAa,EACbC,SAAU,EACVC,YAAa,YAEfpE,KAAKqE,MAAM,CACTC,OAAQ,OACRC,IAAK,kBACLE,SAER,SACQ,KAAR,eACQ,KAAR,MAEQ,KAAR,mBACQ,KAAR,oBAGA,UACQ,QAAR,sBAII,iBAAiBjD,GACfxB,KAAK4E,kBAAkB,CAACpD,KAM1B,sBAEE,IAAK,IAAIqC,EAAI,EAAGA,EAAI7D,KAAKY,YAAYC,OAAQgD,IACvC7D,KAAKY,YAAYiD,GAAGL,UACtBxD,KAAK4E,kBAAkB,CAAC5E,KAAKY,YAAYiD,GAAGrC,MAC5CxB,KAAKY,YAAYiE,OAAOhB,EAAG,GAC3BA,MA4BN,MAEE7D,KAAKyC,MAAQ,EACbzC,KAAKY,YAAY0C,IAAI,IACfC,EAAEC,UACJxD,KAAKyC,OAASqC,OAAOvB,EAAEnB,OAASmB,EAAElB,SAGtCrC,KAAKyC,MAAqB,IAAbzC,KAAKyC,SCnVwU,I,wBCQ5VsC,EAAY,eACd,EACAjF,EACAiD,GACA,EACA,KACA,WACA,MAIa,aAAAgC,E,6CCnBf,yBAA6jB,EAAG,G","file":"js/chunk-34f2521e.8a51251b.js","sourcesContent":["class Utils {\r\n\r\n    //序列化参数\r\n    queryString(o) {\r\n      let params = '';\r\n      for (let key in o) {\r\n        params += `${key}=${o[key]}&`;\r\n      }\r\n  \r\n      return params.slice(0, -1);\r\n    }\r\n  \r\n  }\r\n  \r\n  export const utils = new Utils();","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"shopbag\"},[_c('van-nav-bar',{attrs:{\"title\":\"购物车\",\"left-text\":\"返回\",\"left-arrow:fixed\":\"true\"},on:{\"click-right\":_vm.toggleEdit,\"click-left\":_vm.back},scopedSlots:_vm._u([(_vm.shopBagData.length > 0)?{key:\"right\",fn:function(){return [_c('div',[_vm._v(\" \"+_vm._s(_vm.isEdit ? \"完成\" : \"编辑\")+\" \")])]},proxy:true}:null],null,true)}),_c('div',_vm._l((_vm.shopBagData),function(item,index){return _c('van-swipe-cell',{key:index,attrs:{\"disabled\":!_vm.isEdit},scopedSlots:_vm._u([{key:\"right\",fn:function(){return [_c('van-button',{attrs:{\"square\":\"\",\"type\":\"danger\",\"text\":\"删除\",\"color\":\"#0c34ba\"},on:{\"click\":function($event){return _vm.removeOneShopBag(item.sid)}}})]},proxy:true}],null,true)},[_c('van-cell',{attrs:{\"border\":false}},[_c('div',{staticClass:\"clearfix pro-box\"},[_c('div',{staticClass:\"fl check\"},[_c('van-checkbox',{attrs:{\"icon-size\":\"24px\",\"checked-color\":\"#0c34ba\"},on:{\"click\":function($event){return _vm.toggleCheck(item)}},model:{value:(item.isCheck),callback:function ($$v) {_vm.$set(item, \"isCheck\", $$v)},expression:\"item.isCheck\"}})],1),_c('div',{staticClass:\"fl pro-img\"},[_c('img',{staticClass:\"auto-img\",attrs:{\"src\":item.small_img,\"alt\":\"\"}})]),_c('div',{staticClass:\"fl pro-info\"},[_c('div',{staticClass:\"clearfix\"},[_c('div',{staticClass:\"name-cn fl\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"pro-rule fl\"},[_vm._v(_vm._s(item.rule))])]),_c('div',{staticClass:\"name-us\"},[_vm._v(\" \"+_vm._s(item.enname)+\" \")]),_c('div',{staticClass:\"clearfix btm\"},[_c('div',{staticClass:\"fl pro-price\"},[_vm._v(\"￥\"+_vm._s(item.price * item.count))]),_c('div',{staticClass:\"fr \"},[_c('van-stepper',{attrs:{\"theme\":\"round\",\"button-size\":\"24\",\"disable-input\":\"\"},on:{\"change\":function($event){return _vm.modifyCount(item)}},model:{value:(item.count),callback:function ($$v) {_vm.$set(item, \"count\", $$v)},expression:\"item.count\"}})],1)])])])])],1)}),1),_c('van-empty',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.shopBagData.length < 1),expression:\"shopBagData.length < 1\"}],attrs:{\"description\":\"购物袋是空的desu\"}},[_c('van-button',{attrs:{\"type\":\"default\",\"color\":\"#0c43ba\",\"to\":\"Menu\"}},[_vm._v(\"去逛逛把\")])],1),(_vm.shopBagData.length > 0)?_c('div',[_c('van-submit-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isEdit),expression:\"!isEdit\"}],attrs:{\"price\":_vm.total,\"button-text\":\"提交订单\",\"button-color\":\"#0c34ba\"},on:{\"submit\":_vm.commit}},[_c('van-checkbox',{attrs:{\"checked-color\":\"#0c34ba\",\"icon-size\":\"24px\"},on:{\"click\":_vm.isAllCheck},model:{value:(_vm.allChecked),callback:function ($$v) {_vm.allChecked=$$v},expression:\"allChecked\"}},[_vm._v(\"全选 \")])],1),_c('van-submit-bar',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.isEdit),expression:\"isEdit\"}],attrs:{\"button-text\":\"删除所选\",\"button-color\":\"#0c43ba\"},on:{\"submit\":_vm.removeSelectShopBag}},[_c('van-checkbox',{attrs:{\"checked-color\":\"#0c34ba\",\"icon-size\":\"24px\"},on:{\"click\":_vm.isAllCheck},model:{value:(_vm.allChecked),callback:function ($$v) {_vm.allChecked=$$v},expression:\"allChecked\"}},[_vm._v(\"全选 \")])],1)],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"shopbag\">\r\n    <!-- 导航 -->\r\n    <van-nav-bar\r\n      title=\"购物车\"\r\n      left-text=\"返回\"\r\n      left-arrow:fixed=\"true\"\r\n      @click-right=\"toggleEdit\"\r\n      @click-left=\"back\"\r\n    >\r\n      <template #right v-if=\"shopBagData.length > 0\">\r\n        <div>\r\n          {{ isEdit ? \"完成\" : \"编辑\" }}\r\n        </div>\r\n      </template>\r\n    </van-nav-bar>\r\n    <!-- 内容 -->\r\n    <div>\r\n      <van-swipe-cell\r\n        :disabled=\"!isEdit\"\r\n        v-for=\"(item, index) in shopBagData\"\r\n        :key=\"index\"\r\n      >\r\n        <van-cell :border=\"false\">\r\n          <div class=\"clearfix pro-box\">\r\n            <!-- 选中栏 -->\r\n            <div class=\"fl check\">\r\n              <van-checkbox\r\n                v-model=\"item.isCheck\"\r\n                icon-size=\"24px\"\r\n                checked-color=\"#0c34ba\"\r\n                @click=\"toggleCheck(item)\"\r\n              />\r\n            </div>\r\n            <!-- 商品图片 -->\r\n            <div class=\"fl pro-img\">\r\n              <img class=\"auto-img\" :src=\"item.small_img\" alt=\"\" />\r\n            </div>\r\n            <!-- 商品信息 -->\r\n            <div class=\"fl pro-info\">\r\n              <div class=\"clearfix\">\r\n                <div class=\"name-cn fl\">{{ item.name }}</div>\r\n                <div class=\"pro-rule fl\">{{ item.rule }}</div>\r\n              </div>\r\n              <div class=\"name-us\">\r\n                {{ item.enname }}\r\n              </div>\r\n              <div class=\"clearfix btm\">\r\n                <!-- 价格 -->\r\n                <div class=\"fl pro-price\">￥{{ item.price * item.count }}</div>\r\n                <div class=\"fr \">\r\n                  <!-- 步进器 -->\r\n                  <van-stepper\r\n                    v-model=\"item.count\"\r\n                    theme=\"round\"\r\n                    button-size=\"24\"\r\n                    disable-input\r\n                    @change=\"modifyCount(item)\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </van-cell>\r\n        <template #right>\r\n          <van-button\r\n            square\r\n            type=\"danger\"\r\n            text=\"删除\"\r\n            color=\"#0c34ba\"\r\n            @click=\"removeOneShopBag(item.sid)\"\r\n          />\r\n        </template>\r\n      </van-swipe-cell>\r\n    </div>\r\n    <!-- 空 -->\r\n    <van-empty description=\"购物袋是空的desu\" v-show=\"shopBagData.length < 1\">\r\n      <van-button type=\"default\" color=\"#0c43ba\" to=\"Menu\">去逛逛把</van-button>\r\n    </van-empty>\r\n    <!-- 底部菜单 -->\r\n    <div v-if=\"shopBagData.length > 0\">\r\n      <!-- 提交订单栏 -->\r\n      <van-submit-bar\r\n        v-show=\"!isEdit\"\r\n        :price=\"total\"\r\n        button-text=\"提交订单\"\r\n        button-color=\"#0c34ba\"\r\n        @submit=\"commit\"\r\n      >\r\n        <van-checkbox\r\n          v-model=\"allChecked\"\r\n          checked-color=\"#0c34ba\"\r\n          icon-size=\"24px\"\r\n          @click=\"isAllCheck\"\r\n          >全选\r\n        </van-checkbox>\r\n      </van-submit-bar>\r\n      <!-- 删除栏 -->\r\n      <van-submit-bar\r\n        v-show=\"isEdit\"\r\n        button-text=\"删除所选\"\r\n        button-color=\"#0c43ba\"\r\n        @submit=\"removeSelectShopBag\"\r\n      >\r\n        <van-checkbox\r\n          v-model=\"allChecked\"\r\n          checked-color=\"#0c34ba\"\r\n          icon-size=\"24px\"\r\n          @click=\"isAllCheck\"\r\n          >全选\r\n        </van-checkbox>\r\n      </van-submit-bar>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { utils } from \"../../assets/js/utils\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      allChecked: false,\r\n      // 是否是编辑状态\r\n      isEdit: false,\r\n      pids: [],\r\n      shopBagData: [],\r\n      total: 0,\r\n    };\r\n  },\r\n  created() {\r\n    this.findShopBagData();\r\n  },\r\n  methods: {\r\n    // 返回\r\n    back() {\r\n      this.$router.go(-1);\r\n    },\r\n    // 提交订单\r\n    commit() {\r\n      let sids = [];\r\n      this.shopBagData.map((v) => {\r\n        if (v.isCheck) {\r\n          sids.push(v.sid);\r\n        }\r\n      });\r\n      if(sids.length ===0){\r\n        this.$toast(\"请选择至少一件商品\")\r\n        return\r\n      }\r\n      sids = sids.join(\"-\");\r\n\r\n      this.$router.push({ name: \"Pay\", query: { sids } });\r\n    },\r\n    // 切换编辑状态\r\n    toggleEdit() {\r\n      this.isEdit = !this.isEdit;\r\n    },\r\n    // 切换是否全选\r\n    isAllCheck() {\r\n      this.shopBagData.map((v) => {\r\n        v.isCheck = this.allChecked;\r\n      });\r\n      this.sum();\r\n    },\r\n    // 单选切换check状态\r\n    // 判断是否全部选上\r\n    toggleCheck(item) {\r\n      this.sum();\r\n      for (let i = 0; i < this.shopBagData.length; i++) {\r\n        if (this.shopBagData[i].isCheck == false) {\r\n          this.allChecked = false;\r\n          return;\r\n        }\r\n        this.allChecked = true;\r\n      }\r\n    },\r\n    // 查询购物车商品内容\r\n    findShopBagData() {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        return this.$router.push({\r\n          name: \"Login\",\r\n        });\r\n      }\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"GET\",\r\n        url: \"/findAllShopcart\",\r\n        params: {\r\n          appkey: this.appkey,\r\n          tokenString,\r\n        },\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 5000) {\r\n            result.data.result.map((v) => {\r\n              v.isCheck = false;\r\n            });\r\n            this.shopBagData = result.data.result;\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 编辑购物车商品的数量\r\n    modifyCount(item) {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        return this.$router.push({\r\n          name: \"Login\",\r\n        });\r\n      }\r\n\r\n      let data = utils.queryString({\r\n        appkey: this.appkey,\r\n        tokenString,\r\n        sid: item.sid,\r\n        count: item.count,\r\n      });\r\n\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/modifyShopcartCount\",\r\n        data,\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          if (result.data.code == 6000) {\r\n            // 成功修改\r\n            this.sum();\r\n            // console.log(result.data.msg);\r\n          }\r\n          console.log(\"编辑购物车数量 \", result.data.msg);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 删除购物车内容\r\n    removeShopBagData(sids) {\r\n      let tokenString = localStorage.getItem(\"CSTK\");\r\n      if (!tokenString) {\r\n        return this.$router.push({\r\n          name: \"Login\",\r\n        });\r\n      }\r\n\r\n      let data = utils.queryString({\r\n        appkey: this.appkey,\r\n        tokenString,\r\n        sids: JSON.stringify(sids),\r\n      });\r\n\r\n      this.$toast({\r\n        message: \"加载中\",\r\n        forbidClick: true,\r\n        duration: 0,\r\n        loadingType: \"spinner\",\r\n      });\r\n      this.axios({\r\n        method: \"POST\",\r\n        url: \"/deleteShopcart\",\r\n        data,\r\n      })\r\n        .then((result) => {\r\n          this.$toast.clear();\r\n          this.sum();\r\n          // console.log(result);\r\n          this.$toast(result.data.msg);\r\n          this.findShopBagData();\r\n          // ？商品数量不唯一的时候 且不是最后一个 重新渲染会触发编辑数量？\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error => \", err);\r\n        });\r\n    },\r\n    // 单个删除\r\n    removeOneShopBag(sid) {\r\n      this.removeShopBagData([sid]);\r\n      // 可以把remosheopbagdata 的axios返回\r\n      // 参数多增加一个index 然后在 then 中删除shopbagdata第index个元素\r\n      // splice(index,1)\r\n    },\r\n    // 删除选中\r\n    removeSelectShopBag() {\r\n      // 遍历所有 ischeck为真 选中 就删除\r\n      for (let i = 0; i < this.shopBagData.length; i++) {\r\n        if (this.shopBagData[i].isCheck) {\r\n          this.removeShopBagData([this.shopBagData[i].sid]);\r\n          this.shopBagData.splice(i, 1);\r\n          i--;\r\n        }\r\n      }\r\n      // 先拿到所有的sid 然后调用方法\r\n      // let sids = [];\r\n      // this.shopBagData.map((v) => {\r\n      //   if (v.isCheck) {\r\n      //     sids.push(v.sid);\r\n      //   }\r\n      // });\r\n      // console.log(sids);\r\n      // this.removeShopBagData(sids)\r\n      //   .then((result) => {\r\n      //     this.$toast.clear();\r\n      //     if (result.data.code == 7000) {\r\n      //       for (let i = this.shopBagData.length - 1; i >= 0; i--) {\r\n      //         if (this.shopBagData[i].isCheck) {\r\n      //           this.shopBagData.splice(i, 1);\r\n      //         }\r\n      //       }\r\n      //     }\r\n      //     this.$toast(result.data.msg);\r\n      //   })\r\n      //   .catch((err) => {\r\n      //     console.log(\"error => \", err);\r\n      //   });\r\n    },\r\n    // 统计总金额\r\n    sum() {\r\n      // console.log(\"在算了 在算了\")\r\n      this.total = 0;\r\n      this.shopBagData.map((v) => {\r\n        if (v.isCheck) {\r\n          this.total += Number(v.price) * v.count;\r\n        }\r\n      });\r\n      this.total = this.total * 100;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scoped>\r\n.shopbag {\r\n  padding-bottom: 50px;\r\n\r\n  .pro-box {\r\n    background-color: #fff;\r\n    margin-top: 10px;\r\n    padding: 10px;\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .check {\r\n    width: 24px;\r\n    height: 24px;\r\n    margin-top: 23px;\r\n  }\r\n\r\n  .pro-img {\r\n    width: 70px;\r\n    height: 70px;\r\n    margin: 0 10px;\r\n    border-radius: 50%;\r\n    overflow: hidden;\r\n  }\r\n\r\n  .pro-info {\r\n    position: relative;\r\n    width: calc(~\"100% - 114px\");\r\n    height: 70px;\r\n\r\n    // background-color: aqua;\r\n    .name-cn {\r\n      font-size: 18px;\r\n      color: #444;\r\n    }\r\n\r\n    .pro-rule {\r\n      margin-left: 5px;\r\n      font-size: 14px;\r\n      color: #999;\r\n    }\r\n\r\n    .name-us {\r\n      font-size: 15px;\r\n      line-height: 15px;\r\n      color: #999;\r\n    }\r\n\r\n    .btm {\r\n      position: absolute;\r\n      left: 0;\r\n      bottom: 2px;\r\n      width: 100%;\r\n\r\n      .pro-price {\r\n        font-size: 18px;\r\n        color: #0c34ba;\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n//删除按钮\r\n/deep/ .van-swipe-cell__right .van-button {\r\n  height: 100%;\r\n  border-top-left-radius: 10px;\r\n  border-bottom-left-radius: 10px;\r\n  overflow: hidden;\r\n}\r\n\r\n/deep/ .van-swipe-cell__right {\r\n  padding: 5px 0;\r\n}\r\n\r\n// 底部提交\r\n/deep/ .van-submit-bar {\r\n  bottom: 50px;\r\n}\r\n\r\n/deep/ .van-submit-bar__price {\r\n  color: #0c34ba;\r\n}\r\n\r\n/deep/ .van-button {\r\n  margin-left: auto;\r\n}\r\n\r\n// qita\r\n/deep/ .van-stepper__plus {\r\n  background-color: #0c43ba;\r\n}\r\n\r\n/deep/ .van-stepper__minus {\r\n  color: #0c43ba;\r\n  border-color: #0c43ba;\r\n}\r\n\r\n/deep/ .van-cell {\r\n  padding: 0 10px;\r\n  background-color: rgb(244, 244, 244);\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Shopbag.vue?vue&type=template&id=1ffc1a82&scoped=true&\"\nimport script from \"./Shopbag.vue?vue&type=script&lang=js&\"\nexport * from \"./Shopbag.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Shopbag.vue?vue&type=style&index=0&id=1ffc1a82&lang=less&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"1ffc1a82\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=style&index=0&id=1ffc1a82&lang=less&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Shopbag.vue?vue&type=style&index=0&id=1ffc1a82&lang=less&scoped=true&\""],"sourceRoot":""}