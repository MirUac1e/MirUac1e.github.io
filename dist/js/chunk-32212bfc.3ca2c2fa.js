(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-32212bfc"],{"18b3":function(e,s,t){"use strict";var a=t("b2e0"),o=t.n(a);o.a},"2baa":function(e,s,t){e.exports=t.p+"img/tabbar_18.01b886c1.png"},"2f14":function(e,s,t){"use strict";t.d(s,"a",(function(){return o}));class a{queryString(e){let s="";for(let t in e)s+=`${t}=${e[t]}&`;return s.slice(0,-1)}}const o=new a},a55b:function(e,s,t){"use strict";t.r(s);var a=function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("div",{staticClass:"login-box"},[a("div",{staticClass:"nav-box"},[a("van-nav-bar",{on:{"click-right":e.goHome},scopedSlots:e._u([{key:"left",fn:function(){return[a("div",{staticClass:"nav-left"},[a("div",{staticClass:"nav-logo"},[a("img",{staticClass:"auto-img",attrs:{src:t("2baa"),alt:""}})]),a("div",{staticClass:"nav-title"},[e._v("Luckin Coffee")])])]},proxy:!0},{key:"right",fn:function(){return[a("div",{staticClass:"close"},[e._v("关闭")])]},proxy:!0}])})],1),a("div",{staticClass:"sign-form"},[a("div",{staticClass:"title"},[e._v("欢迎回来!")]),a("div",{staticClass:"en-titile"},[e._v("Please login to your accounts")]),a("div",{staticClass:"login-form"},[a("van-form",[a("van-field",{attrs:{placeholder:"用户名"},model:{value:e.loginUserData.phone,callback:function(s){e.$set(e.loginUserData,"phone",s)},expression:"loginUserData.phone"}}),a("van-field",{attrs:{"right-icon":e.isPassword?"closed-eye":"eye-o",type:e.isPassword?"password":"text",placeholder:"密码",autocomplete:"off"},on:{"click-right-icon":e.passwordClick},model:{value:e.loginUserData.password,callback:function(s){e.$set(e.loginUserData,"password",s)},expression:"loginUserData.password"}}),a("div",{staticClass:"fr clearfix forget-password",on:{click:e.forgetPassword}},[e._v("忘记密码?")]),a("div",{staticClass:"form-button",staticStyle:{margin:"45px 16px"}},[a("van-button",{attrs:{block:"",type:"info","native-type":"submit"},on:{click:e.login}},[e._v(" 登录 ")]),a("van-button",{attrs:{block:"",type:"default"},on:{click:e.popupLogin}},[e._v("注册")])],1),a("van-popup",{style:{width:"100%",height:"50%"},attrs:{position:"bottom",closeable:"","close-icon":"close",round:"",overlay:"","overlay-class":"overlayClass"},model:{value:e.isPopup,callback:function(s){e.isPopup=s},expression:"isPopup"}},[a("div",{staticClass:"title"},[e._v("注册")]),a("van-form",[a("van-field",{attrs:{placeholder:"手机号"},model:{value:e.registerUserData.phone,callback:function(s){e.$set(e.registerUserData,"phone",s)},expression:"registerUserData.phone"}}),a("van-field",{attrs:{placeholder:"用户昵称"},model:{value:e.registerUserData.nickName,callback:function(s){e.$set(e.registerUserData,"nickName",s)},expression:"registerUserData.nickName"}}),a("van-field",{attrs:{"right-icon":e.isPassword?"closed-eye":"eye-o",type:e.isPassword?"password":"text",placeholder:"密码",autocomplete:"off"},on:{"click-right-icon":e.passwordClick},model:{value:e.registerUserData.password,callback:function(s){e.$set(e.registerUserData,"password",s)},expression:"registerUserData.password"}}),a("div",{staticClass:"register-btn"},[a("van-button",{attrs:{block:"",type:"info","native-type":"submit"},on:{click:e.register}},[e._v(" 注册 ")])],1)],1)],1)],1)],1)])])},o=[],r=t("e3a8"),i=t("2f14"),n={data(){return{registerUserData:{phone:"",nickName:"",password:""},loginUserData:{phone:"",password:""},isPassword:!0,isPopup:!1}},methods:{goHome(){this.$router.push({name:"Home"})},forgetPassword(){this.$router.push({name:"Forget"})},passwordClick(){this.isPassword=!this.isPassword},popupLogin(){this.isPopup=!0},register(){let e=this.registerUserData,s={phone:{value:e.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号格式不正确"},nickName:{value:e.nickName,reg:/^[\w\u4e00-\u9fa5]{1,10}$/,errorMsg:"昵称格式不正确"},password:{value:e.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码格式不正确"}};if(r["a"].valid(s),!r["a"].valid(s))return;this.$toast.loading({message:"加载中",duration:0,forbidClick:!0,loadingType:"spinner"});let t=Object.assign({},e);t.appkey=this.appkey;let a=i["a"].queryString(t);console.log(a),this.axios({method:"POST",url:"/register",data:a}).then(s=>{if(this.$toast.clear(),100==s.data.code){this.isPopup=!1;for(let s in e)e[s]=""}else this.$notify({type:"warning",message:s.data.msg})}).catch(e=>{this.$toast.clear(),console.log("错误 => ",e)})},login(){let e=this.loginUserData,s={phone:{value:e.phone,reg:/^1[3-9]\d{9}$/,errorMsg:"手机号码格式不正确"},password:{value:e.password,reg:/^[A-Za-z]\w{5,15}$/,errorMsg:"密码格式不正确"}};if(r["a"].valid(s),!r["a"].valid(s))return;let t=Object.assign({},e);t.appkey=this.appkey;let a=i["a"].queryString(t);this.$toast.loading({message:"加载中...",forbidClick:!0,duration:0,loadingType:"spinner"}),this.axios({method:"post",url:"/login",data:a}).then(e=>{console.log(e),this.$toast.clear(),200==e.data.code?(localStorage.setItem("CSTK",e.data.token),this.$router.push({name:"Home"})):this.$toast({type:"warning",message:e.data.msg})}).catch(e=>{console.log("error => ",e)})}}},l=n,c=(t("18b3"),t("2877")),p=Object(c["a"])(l,a,o,!1,null,"3e3bfca5",null);s["default"]=p.exports},b2e0:function(e,s,t){},e3a8:function(e,s,t){"use strict";t.d(s,"a",(function(){return i}));t("9a83");var a=t("f564"),o=t("2b0e");o["a"].use(a["a"]);class r{valid(e){for(let s in e)if(!e[s].reg.test(e[s].value))return Object(a["a"])({type:"warning",message:e[s].errorMsg}),!1;return!0}}const i=new r}}]);
//# sourceMappingURL=chunk-32212bfc.3ca2c2fa.js.map